#ifndef __adc50_h__
#define __adc50_h__

// ADC50 is a 16 bit analog to digital converter with 4 5 volt inputs. ADC50
// uses the I2C protocol for reading or writing of data and configuration.
// ADC50 inputs A0 - A3 are accessible through the on board stick jack when
// onboard joysticks are not in use.
//
// Hardware: Texas Instruments ADS 1115.
//

#include "i2c_interface.h"



#define ADC50_I2C_BUS_NUM 1
#define ADC50_I2C_ADDRESS 0x48

#define ADC50_INPUT_NONE    0
#define ADC50_INPUT_JOY3D   1
#define ADC50_INPUT_JOY2X2D 2

int adc50_init(mraa_i2c_context i2c1, int adc50_input);
int adc50_sample_single_end(mraa_i2c_context i2c1, int channel);



//ADC50 CONFIGURATION
#define ADC50_STATUS_BIT0 15
#define ADC50_STATUS_BIT0MASK 0x01
#define ADC50_STATUS_START_SINGLE 0x01

//CONFIG MUX BITS
#define ADC50_MUX_BIT0 12
#define ADC50_MUX_BIT0MASK 0x07
#define ADC50_MUX_DIFF_0_1 0x00
#define ADC50_MUX_DIFF_0_3 0x01
#define ADC50_MUX_DIFF_1_3 0x02
#define ADC50_MUX_DIFF_2_3 0x03
#define ADC50_MUX_SINGLE_1 0x04
#define ADC50_MUX_SINGLE_2 0x05
#define ADC50_MUX_SINGLE_3 0x06
#define ADC50_MUX_SINGLE_4 0x07

//CONFIG PGA BITS
#define ADC50_PGA_BIT0 9
#define ADC50_PGA_BIT0MASK 0x07
#define ADC50_PGA_RANGE_6144V 0x00
#define ADC50_PGA_RANGE_4096V 0x01
#define ADC50_PGA_RANGE_2048V 0x02
#define ADC50_PGA_RANGE_1024V 0x03
#define ADC50_PGA_RANGE_0512V 0x04
#define ADC50_PGA_RANGE_0256V 0x05

//CONFIG CONVERSION MODE BITS
#define ADC50_MODE_BIT0 8
#define ADC50_MODE_BIT0MASK 0x01
#define ADC50_CONVMODE_CONTINUOUS 0x00
#define ADC50_CONVMODE_SINGLE 0x01

//CONFIG DATA RATE BITS
#define ADC50_DATARATE_BIT0 5
#define ADC50_DATARATE_BIT0MASK 0x07
#define ADC50_DATARATE_8 0x00
#define ADC50_DATARATE_16 0x01
#define ADC50_DATARATE_32 0x02
#define ADC50_DATARATE_64 0x03
#define ADC50_DATARATE_128 0x04
#define ADC50_DATARATE_250 0x05
#define ADC50_DATARATE_475 0x06
#define ADC50_DATARATE_860 0x07

//CONFIG COMPARATOR MODE BITS
#define ADC50_COMPAREMODE_BIT0 4
#define ADC50_COMPAREMODE_BIT0MASK 0x01
#define ADC50_COMPARE_MODETRADITIONAL 0x00
#define ADC50_COMPARE_MODEWINDOW 0x01

//CONFIG COMPARATOR POLARITY BITS
#define ADC50_COMPAREPOLARITY_BIT0 3
#define ADC50_COMPAREPOLARITY_BIT0MASK 0x01
#define ADC50_COMPARE_POLARITYACTIVELO 0x00
#define ADC50_COMPARE_POLARITYACTIVEHI 0x01

//CONFIG COMPARATOR LATCHING BITS
#define ADC50_COMPARELATCH_BIT0 2
#define ADC50_COMPARELATCH_BIT0MASK 0x01
#define ADC50_COMPARE_NONLATCHING 0x00
#define ADC50_COMPARE_LATCHING 0x01

//CONFIG COMPARATOR QUEUEING BITS
#define ADC50_COMPAREQUE_BIT0 0
#define ADC50_COMPAREQUE_BIT0MASK 0x03
#define ADC50_COMPARE_QUE_1 0x00
#define ADC50_COMPARE_QUE_2 0x01
#define ADC50_COMPARE_QUE_4 0x02
#define ADC50_COMPARE_OFF 0x03

#endif
